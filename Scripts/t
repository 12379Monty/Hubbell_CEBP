
#this is the MIS scenario where schedule sensitivity is perfect so slip rates are 0
optimal_performance <- run_intercept_model( 
  incidence_sens_source,
  dwell_slip_rate %>% 
     filter(scenario==0))
optimal_excluded <- run_excluded_model(incidence_excluded_source) #does not depend on scenario
optimal_performance <- bind_rows(optimal_performance,optimal_excluded)
optimal_performance <- optimal_performance %>% mutate(opt="0",dw_scenario=0,scan="incident")

#no screening so nothing found by cfdna operations
no_screening_performance <- run_intercept_model(
  incidence_sens_source,
  dwell_no_rate %>%
    filter(scenario==0))

no_screening_performance <- bind_rows(no_screening_performance, optimal_excluded) %>%
  mutate(opt="NO",dw_scenario=0,scan="no")

all_options_df <- bind_rows(my_list,.id="opt") %>%
  bind_rows(optimal_performance) %>%
  bind_rows(no_screening_performance)


#Now we have the full, detailed data frame
#add some helper text fields to clarify states represented by each line of the file 
text_options_df <- all_options_df %>%
  select(opt,Cancer,clinical,prequel,found_clinical,
         caught,s_survival,c_survival, 
         original_survivors,shifted_survivors,
         original_deaths,shifted_deaths,
         screen_interval,dw_scenario,scan) %>%
  mutate(mode_found=c("cfdna","soc")[found_clinical],
         aggressive=c("MIS","VSlow","Slow","Fast","AggFast")[dw_scenario+1])

